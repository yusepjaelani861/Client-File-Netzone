{"ast":null,"code":"import _slicedToArray from\"/Users/yusepjaelani/Netzone/Project/nearven/file-service/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();setLoading(true);fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/v1/auth/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:email,password:password})}).then(function(res){return res.json();}).then(function(data){if(data.success===false){setError(data.message);setLoading(false);}else{setLoading(false);//   history.push(\"/\");\ndocument.cookie=\"token=\".concat(data.data.token,\"; path=/; expires=\").concat(data.data.expires_at,\";\");console.log('cookie:',document.cookie);window.location.href=\"/dashboard\";}// window.location.href = \"/\";\n}).catch(function(err){setLoading(false);setError(err.message);});};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-light-blue-500 h-[80vh] flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-2/5 p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-center mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block mb-2\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},className:\"border border-gray-300 px-3 py-2 rounded w-full focus:outline-none focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},className:\"border border-gray-300 px-3 py-2 rounded w-full focus:outline-none focus:border-blue-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-500 text-white px-3 py-2 rounded w-full focus:outline-none\",children:loading?\"Loading...\":\"Login\"})})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error})]})});}","map":{"version":3,"names":["useState","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","handleSubmit","e","preventDefault","fetch","process","env","REACT_APP_BACKEND_URL","method","headers","body","JSON","stringify","user","then","res","json","data","success","message","document","cookie","token","expires_at","console","log","window","location","href","catch","err","target","value"],"sources":["/Users/yusepjaelani/Netzone/Project/nearven/file-service/client/src/pages/Auth/Login.js"],"sourcesContent":["import { useState } from \"react\";\n\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    fetch(`${process.env.REACT_APP_BACKEND_URL}/api/v1/auth/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: email,\n        password,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.success === false) {\n            setError(data.message);\n            setLoading(false);\n        } else {\n            setLoading(false);\n            //   history.push(\"/\");\n            document.cookie = `token=${data.data.token}; path=/; expires=${data.data.expires_at};`;\n            console.log('cookie:', document.cookie);\n            window.location.href = \"/dashboard\";\n        }\n        // window.location.href = \"/\";\n      })\n      .catch((err) => {\n        setLoading(false);\n        setError(err.message);\n      });\n  };\n  return (\n    <div className=\"bg-light-blue-500 h-[80vh] flex justify-center items-center\">\n      <div className=\"bg-white w-2/5 p-4 rounded\">\n        <h1 className=\"text-2xl font-bold text-center mb-4\">Login</h1>\n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <label htmlFor=\"email\" className=\"block mb-2\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              id=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"border border-gray-300 px-3 py-2 rounded w-full focus:outline-none focus:border-blue-500\"\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label htmlFor=\"password\" className=\"block mb-2\">\n              Password\n            </label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"border border-gray-300 px-3 py-2 rounded w-full focus:outline-none focus:border-blue-500\"\n            />\n          </div>\n          <div className=\"mb-4\">\n            <button\n              type=\"submit\"\n              className=\"bg-blue-500 text-white px-3 py-2 rounded w-full focus:outline-none\"\n            >\n              {loading ? \"Loading...\" : \"Login\"}\n            </button>\n          </div>\n        </form>\n        {error && <p className=\"text-red-500\">{error}</p>}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}