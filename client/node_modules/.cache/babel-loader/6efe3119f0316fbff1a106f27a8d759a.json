{"ast":null,"code":"import _objectSpread from\"/Users/yusepjaelani/Netzone/Project/nearven/file-service/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/yusepjaelani/Netzone/Project/nearven/file-service/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Card from'@material-tailwind/react/Card';import CardHeader from'@material-tailwind/react/CardHeader';import CardBody from'@material-tailwind/react/CardBody';import Button from'@material-tailwind/react/Button';import Input from'@material-tailwind/react/Input';import{useState}from'react';import{notify}from'assets/utils/helper';import{removeCookie}from'assets/utils/helper';import{getCookie}from'assets/utils/helper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PasswordForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({password:'',new_password:'',new_password_confirmation:''}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var handleChangePassword=function handleChangePassword(){var token=getCookie('token');if(token===''||token===undefined){window.location.href='/login';}setLoading(true);setTimeout(function(){try{fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/v1/admin/user/change-password\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCookie('token'))},body:JSON.stringify(data)}).then(function(res){return res.json();}).then(function(data){if(data.success===true){setLoading(false);notify(data.message);setTimeout(function(){window.location.reload();},1000);}else if(data.error.error_code===0){removeCookie('token');window.location.href='/login';}else{setLoading(false);notify(data.message);}}).catch(function(err){throw new Error(err);});}catch(err){throw new Error(err);}});};return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{color:\"purple\",contentPosition:\"none\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-white text-2xl\",children:\"Change Password\"})})}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap mt-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-12/12 mb-10 font-light\",children:/*#__PURE__*/_jsx(Input,{type:\"password\",color:\"purple\",placeholder:\"Password\",onChange:function onChange(e){return setData(_objectSpread(_objectSpread({},data),{},{password:e.target.value}));}})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-12/12 mb-10 font-light\",children:/*#__PURE__*/_jsx(Input,{type:\"password\",color:\"purple\",placeholder:\"New Password\",onChange:function onChange(e){return setData(_objectSpread(_objectSpread({},data),{},{new_password:e.target.value}));}})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full lg:w-12/12 mb-10 font-light\",children:/*#__PURE__*/_jsx(Input,{type:\"password\",color:\"purple\",placeholder:\"New Password Confirmation\",onChange:function onChange(e){return setData(_objectSpread(_objectSpread({},data),{},{new_password_confirmation:e.target.value}));}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap justify-end items-center mt-5\",children:/*#__PURE__*/_jsx(Button,{color:\"purple\",buttonType:\"filled\",size:\"lg\",ripple:\"light\",onClick:function onClick(){if(data.password===''||data.new_password===''||data.new_password_confirmation===''){notify('Mohon isi seluruh form');}else if(data.new_password!==data.new_password_confirmation){notify('Password baru tidak sama');}else if(data.new_password.length<6||data.new_password_confirmation.length<6){notify('Password baru minimal 6 karakter');}else{handleChangePassword();}},children:loading?'Loading...':'Save'})})]})]});}","map":{"version":3,"names":["Card","CardHeader","CardBody","Button","Input","useState","notify","removeCookie","getCookie","PasswordForm","loading","setLoading","password","new_password","new_password_confirmation","data","setData","handleChangePassword","token","undefined","window","location","href","setTimeout","fetch","process","env","REACT_APP_BACKEND_URL","method","headers","body","JSON","stringify","then","res","json","success","message","reload","error","error_code","catch","err","Error","e","target","value","length"],"sources":["/Users/yusepjaelani/Netzone/Project/nearven/file-service/client/src/components/PasswordForm.js"],"sourcesContent":["import Card from '@material-tailwind/react/Card';\nimport CardHeader from '@material-tailwind/react/CardHeader';\nimport CardBody from '@material-tailwind/react/CardBody';\nimport Button from '@material-tailwind/react/Button';\nimport Input from '@material-tailwind/react/Input';\nimport { useState } from 'react';\nimport { notify } from 'assets/utils/helper';\nimport { removeCookie } from 'assets/utils/helper';\nimport { getCookie } from 'assets/utils/helper';\n\nexport default function PasswordForm() {\n    const [loading, setLoading] = useState(false)\n    const [data, setData] = useState({\n        password: '',\n        new_password: '',\n        new_password_confirmation: '',\n    })\n\n    const handleChangePassword = () => {\n        const token = getCookie('token')\n        if (token === '' || token === undefined) {\n            window.location.href = '/login'\n        }\n\n        setLoading(true)\n        setTimeout(() => {\n            try {\n                fetch(`${process.env.REACT_APP_BACKEND_URL}/api/v1/admin/user/change-password`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${getCookie('token')}`\n                    },\n                    body: JSON.stringify(data)\n                })\n                .then(res => res.json())\n                .then(data => {\n                    if (data.success === true) {\n                        setLoading(false)\n                        notify(data.message)\n                        setTimeout(() => {\n                            window.location.reload()\n                        }, 1000)\n                    } else if (data.error.error_code === 0) {\n                        removeCookie('token')\n                        window.location.href = '/login'\n                    } else {\n                        setLoading(false)\n                        notify(data.message)\n                    }\n                })\n                .catch(err => {\n                    throw new Error(err)\n                })\n            } catch (err) {\n                throw new Error(err)\n            }\n        })\n    }\n    return (\n        <Card>\n            <CardHeader color=\"purple\" contentPosition=\"none\">\n                <div className=\"w-full flex items-center justify-between\">\n                    <h2 className=\"text-white text-2xl\">Change Password</h2>\n                </div>\n            </CardHeader>\n            <CardBody>\n                {/* <h6 className=\"text-purple-500 text-sm mt-3 mb-6 font-light uppercase\">\n                    User Information\n                </h6> */}\n                <div className=\"flex flex-wrap mt-10\">\n                    <div className=\"w-full lg:w-12/12 mb-10 font-light\">\n                        <Input\n                            type=\"password\"\n                            color=\"purple\"\n                            placeholder=\"Password\"\n                            onChange={(e) => setData({ ...data, password: e.target.value })}\n                        />\n                    </div>\n                    <div className=\"w-full lg:w-12/12 mb-10 font-light\">\n                        <Input\n                            type=\"password\"\n                            color=\"purple\"\n                            placeholder=\"New Password\"\n                            onChange={(e) => setData({ ...data, new_password: e.target.value })}\n                        />\n                    </div>\n                    <div className=\"w-full lg:w-12/12 mb-10 font-light\">\n                        <Input\n                            type=\"password\"\n                            color=\"purple\"\n                            placeholder=\"New Password Confirmation\"\n                            onChange={(e) => setData({ ...data, new_password_confirmation: e.target.value })}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"flex flex-wrap justify-end items-center mt-5\">\n                    <Button color=\"purple\" buttonType=\"filled\" size=\"lg\" ripple=\"light\" onClick={() => {\n                        if (data.password === '' || data.new_password === '' || data.new_password_confirmation === '') {\n                            notify('Mohon isi seluruh form')\n                        } else if (data.new_password !== data.new_password_confirmation) {\n                            notify('Password baru tidak sama')\n                        } else if (data.new_password.length < 6 || data.new_password_confirmation.length < 6) {\n                            notify('Password baru minimal 6 karakter')\n                        } else {\n                            handleChangePassword()\n                        }\n                    }}>\n                        {loading ? 'Loading...' : 'Save'}\n                    </Button>\n                </div>\n\n            </CardBody>\n        </Card>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}